<!DOCTYPE html>
<html lang="hu">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Craftlandia Online - H√≠rek</title>
  <style>
    /* Alapst√≠lusok */
    body {
      font-family: Arial, sans-serif;
      background-color: #f4f4f9;
      margin: 0;
      padding: 0;
    }
    header {
      background-color: #2c3e50;
      color: white;
      padding: 20px;
      text-align: center;
    }
    /* Navig√°ci√≥s s√°v */
    nav {
      background-color: #34495e;
      padding: 10px;
      display: flex;
      justify-content: center;
      gap: 20px;
    }
    nav button {
      padding: 10px 20px;
      background-color: #f3a220;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }
    nav button:hover {
      background-color: #d1ea15;
    }
    #logoutNavBtn {
      display: none;
    }
    /* Modal ablak st√≠lusok */
    .modal {
      display: none; /* Kezdetben rejtve */
      position: fixed;
      z-index: 100;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.5);
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .modal-content {
      background: white;
      padding: 20px;
      border-radius: 8px;
      width: 300px;
      position: relative;
      box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    }
    .modal-content h2 {
      margin-top: 0;
      text-align: center;
    }
    .close {
      position: absolute;
      right: 10px;
      top: 10px;
      cursor: pointer;
      font-size: 20px;
    }
    /* Egy√©b st√≠lusok (pl. h√≠rek list√°ja) */
    main {
      padding: 20px;
    }
    #newsContainer {
      margin-top: 20px;
    }
    .news-item {
      background-color: #ecf0f1;
      padding: 15px;
      border-radius: 5px;
      margin-bottom: 10px;
    }
    .news-item h3 {
      color: #2980b9;
    }
    .news-item p {
      font-size: 14px;
    }
  </style>
</head>
<body>
  <header>
    <h1>Craftlandia Online - H√≠rek</h1>
  </header>
  
  <!-- Navig√°ci√≥s s√°v -->
    <button id="logoutNavBtn">Kil√©p√©s</button>
    <button id="loginNavBtn">Bel√©p√©s</button>
    <button id="signupNavBtn">Regisztr√°ci√≥</button>
    <button id="logoutNavBtn" style="display:none;">Kil√©p√©s</button>
  </nav>
  
  <!-- Bel√©p√©si Modal -->
  <div id="loginModal" class="modal">
    <div class="modal-content">
      <span class="close" id="loginClose">&times;</span>
      <h2>Bel√©p√©s</h2>
      <form id="loginForm">
        <input type="email" id="loginEmail" placeholder="Email" required>
        <input type="password" id="loginPassword" placeholder="Jelsz√≥" required>
        <button type="submit">Bel√©p√©s</button>
      </form>
      <!-- Google bejelentkez√©s gomb -->
      <button id="googleLoginBtn" style="margin-top:10px; background-color:#dd4b39; color:white; border:none; border-radius:4px; padding:10px; cursor:pointer; width:100%;">
        Google bejelentkez√©s
      </button>
    </div>
  </div>
  
  <!-- Regisztr√°ci√≥s Modal -->
  <div id="signupModal" class="modal">
    <div class="modal-content">
      <span class="close" id="signupClose">&times;</span>
      <h2>Regisztr√°ci√≥</h2>
      <form id="signupForm">
        <input type="email" id="signupEmail" placeholder="Email" required>
        <input type="password" id="signupPassword" placeholder="Jelsz√≥" required>
        <button type="submit">Regisztr√°ci√≥</button>
      </form>
    </div>
  </div>
  
  <!-- F≈ë tartalom: H√≠rek list√°ja -->
  <main>
    <section id="newsList">
      <h2>Leg√∫jabb h√≠rek</h2>
      <div id="newsContainer">
        <!-- Itt jelennek meg a h√≠rek -->
      </div>
    </section>
  </main>
  
  <!-- Firebase COMPAT SDK-k -->
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-storage-compat.js"></script>
  
  <script>
    // Firebase konfigur√°ci√≥ ‚Äì cser√©ld le a saj√°t adataidra!
    const firebaseConfig = {
      apiKey: "AIzaSyBfkcNHasJkMJz_mpNczcseQAmfDRV5hUI",
      authDomain: "craftlandia-online.firebaseapp.com",
      projectId: "craftlandia-online",
      storageBucket: "craftlandia-online.firebasestorage.app",
      messagingSenderId: "741338614553",
      appId: "1:741338614553:web:74ae48162cf3bc2c6e5388",
      measurementId: "G-QQ1PFTBFZT"
    };
    
    // Inicializ√°l√°s
    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const db = firebase.firestore();
    const storage = firebase.storage();
    
    /* üî• Navig√°ci√≥ √©s modal kezel√©s üî• */
    
    // DOM elemek
    const loginNavBtn = document.getElementById("loginNavBtn");
    const signupNavBtn = document.getElementById("signupNavBtn");
    const logoutNavBtn = document.getElementById("logoutNavBtn");
    
    const loginModal = document.getElementById("loginModal");
    const signupModal = document.getElementById("signupModal");
    const loginClose = document.getElementById("loginClose");
    const signupClose = document.getElementById("signupClose");
    
    // Gombokra kattintva megjelen√≠tj√ºk a mod√°lis ablakokat
    loginNavBtn.addEventListener("click", () => {
      loginModal.style.display = "flex";
    });
    signupNavBtn.addEventListener("click", () => {
      signupModal.style.display = "flex";
    });
    
    // Modal bez√°r√°sa (x gomb)
    loginClose.addEventListener("click", () => {
      loginModal.style.display = "none";
    });
    signupClose.addEventListener("click", () => {
      signupModal.style.display = "none";
    });
    
    // Ha a modalon k√≠v√ºlre kattintanak, akkor bez√°rjuk
    window.addEventListener("click", (e) => {
      if(e.target === loginModal) {
        loginModal.style.display = "none";
      }
      if(e.target === signupModal) {
        signupModal.style.display = "none";
      }
    });

    location.protocol === 'https:' ? console.log('Biztons√°gos a kapcsolat.') : console.log('Nem biztons√°gos a kapcsolat.');
    
    /* üîê Autentik√°ci√≥s funkci√≥k üîê */
    
    // Bel√©p√©s e-mail/jelsz√≥val
    document.getElementById("loginForm").addEventListener("submit", (e) => {
      e.preventDefault();
      const email = document.getElementById("loginEmail").value;
      const password = document.getElementById("loginPassword").value;
      
      auth.signInWithEmailAndPassword(email, password)
      .then((userCredential) => {
        alert("Sikeres bejelentkez√©s! üöÄ");
        loginModal.style.display = "none";
        document.getElementById("loginForm").reset();
      })
      .catch((error) => {
        alert("Hiba: " + error.message + " üò¨");
        console.error("Bejelentkez√©si hiba:", error);
      });
    });
    
    // Google bejelentkez√©s
    document.getElementById("googleLoginBtn").addEventListener("click", () => {
      const provider = new firebase.auth.GoogleAuthProvider();
      auth.signInWithPopup(provider)
      .then((result) => {
        alert("Sikeres bejelentkez√©s Google fi√≥kkal! üöÄ");
        loginModal.style.display = "none";
      })
      .catch((error) => {
        alert("Hiba a Google bejelentkez√©skor: " + error.message + " üò¨");
        console.error("Google bejelentkez√©si hiba:", error);
      });
    });
    
    // Regisztr√°ci√≥ √©s meger≈ës√≠t≈ë email k√ºld√©s
    document.getElementById("signupForm").addEventListener("submit", (e) => {
      e.preventDefault();
      const email = document.getElementById("signupEmail").value;
      const password = document.getElementById("signupPassword").value;
      
      auth.createUserWithEmailAndPassword(email, password)
      .then((userCredential) => {
        // K√ºldj√ºk el a meger≈ës√≠t≈ë e-mailt
        userCredential.user.sendEmailVerification()
        .then(() => {
          alert("Sikeres regisztr√°ci√≥! üì© K√©rlek, er≈ës√≠tsd meg az e-mail c√≠medet!");
          signupModal.style.display = "none";
          document.getElementById("signupForm").reset();
        })
        .catch((error) => {
          alert("Hiba az e-mail meger≈ës√≠t√©s k√ºld√©sekor: " + error.message);
          console.error("Email verification error:", error);
        });
      })
      .catch((error) => {
        alert("Hiba: " + error.message + " üò¨");
        console.error("Regisztr√°ci√≥s hiba:", error);
      });
    });
    
    // Kil√©p√©s
    logoutNavBtn.addEventListener("click", () => {
      auth.signOut()
      .then(() => {
        alert("Sikeresen kijelentkezt√©l! üëã");
      })
      .catch((error) => {
        alert("Hiba a kijelentkez√©sn√©l: " + error.message + " üò¨");
        console.error("Kijelentkez√©si hiba:", error);
      });
    });
    
    // Autentik√°ci√≥s √°llapot figyel√©se
    auth.onAuthStateChanged((user) => {
      if (user) {
        // Bejelentkezett felhaszn√°l√≥ eset√©n elrejtj√ºk a bel√©p√©s/regisztr√°ci√≥ gombokat,
        // √©s megjelen√≠tj√ºk a kil√©p√©s gombot.
        loginNavBtn.style.display = "none";
        signupNavBtn.style.display = "none";
        logoutNavBtn.style.display = "inline-block";
      } else {
        loginNavBtn.style.display = "inline-block";
        signupNavBtn.style.display = "inline-block";
        logoutNavBtn.style.display = "none";
      }
    });
  </script>
</body>
</html>
